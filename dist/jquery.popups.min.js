/*! jQuery Popups - v0.8.0 - 2013-09-10
* https://github.com/Encrypter8/Popups
* Copyright (c) 2013 Harris Miller; Licensed MIT */
+function(a,b,c){var d=function(a,b){this.options=b,this.$el=a,this.isOpen=!1,this._create()};d.prototype._create=function(){var c=this,d=this.options,e=['style=" position: absolute; ',d.height?"height: "+d.height+"px; ":"",d.maxHeight?"max-height: "+d.maxHeight+"px; ":"",d.maxWidth?"max-width: "+d.maxWidth+"px; ":"",d.minHeight?"min-height: "+d.minHeight+"px; ":"",d.minWidth?"min-width: "+d.minWidth+"px; ":"",d.width?"width: "+d.width+"px; ":"","z-index: "+d.zIndex+'"'].join("");this.$popup=a(['<div class="popup-container '+d.popupClass+'" '+e+">",d.showClose?'<button class="popup-close" type="button"></button>':"",d.showArrow?'<div class="popup-arrow"><div class="inner-arrow"></div></div>':"","</div>"].join("")),this.$arrow=this.$popup.find(".popup-arrow"),d._appendTo=d._appendTo||b.body,this.$popup.append(this.$el).appendTo(d._appendTo).hide(),d.saveTo&&a(d.saveTo).data("popup-ref",this.$el),d.showClose&&this.$popup.find(".popup-close").on("click.popup",function(){c.close()}),d.attachTo=a(d.attachTo),d.autoOpen&&this.open()},d.prototype.positionPopup=function(){if(this.options.attachTo.length){var d=this.options,e=a(c),f=a(b),g=a(d._appendTo);g.offset().top,g.offset().left;var h=d.attachTo.offset(),i=d.attachTo.outerWidth(),j=d.attachTo.outerHeight(),k=this.$popup.outerWidth(),l=this.$popup.outerHeight(),m=0,n=0,o=0,p=0;if(d.responsiveAlignment===!0&&"middle"!==d.align){var q=function(){return h.left+i+k+d.popupBuffer>e.width()?!1:"right"},r=function(){return h.left-k-d.popupBuffer<0?!1:"left"},s=function(){return h.top+j+l+d.popupBuffer>f.scrollTop()+e.height()?!1:"bottom"},t=function(){return h.top-l-d.popupBuffer<f.scrollTop()?!1:"top"},u=[];switch(d.align){case"right":u=[q,r,s,t];break;case"left":u=[r,q,s,t];break;case"bottom":u=[s,t,q,r];break;case"top":u=[t,s,q,r]}for(var v=!1,w=0;w<u.length&&(v=u[w].call(),v===!1);w++);v===!1&&(v="middle"),d.align=v}var x,y=function(){var a;n+l>f.scrollTop()+e.height()&&(a=n+l-(f.scrollTop()+e.height()),n-=a,p+=a),n<f.scrollTop()&&(a=f.scrollTop()-n,n+=a,p-=a)},z=function(){var a;m+k>e.width()&&(a=m+k-e.width(),m-=a,o+=a),0>m&&(a=-m,m+=a,o-=a)};"top"==d.align?(x=k*.01*d.offsetPercentage+d.offsetPixels,m=h.left+i/2-x,n=h.top-l-d.popupBuffer,this.$arrow.addClass("pointing-down"),o=x-this.$arrow.outerWidth()/2-parseInt(this.$popup.css("border-left-width"),10),p=this.$popup.height(),d.responsiveToEdges&&z()):"right"==d.align?(x=l*.01*d.offsetPercentage+d.offsetPixels,m=h.left+i+d.popupBuffer,n=h.top+j/2-x,this.$arrow.addClass("pointing-left"),o=-this.$arrow.outerWidth(),p=x-this.$arrow.outerHeight()/2-parseInt(this.$popup.css("border-top-width"),10),d.responsiveToEdges&&y()):"bottom"==d.align?(x=k*.01*d.offsetPercentage+d.offsetPixels,m=h.left+i/2-x,n=h.top+j+d.popupBuffer,this.$arrow.addClass("pointing-up"),o=x-this.$arrow.outerWidth()/2-parseInt(this.$popup.css("border-left-width"),10),p=-this.$arrow.outerHeight(),d.responsiveToEdges&&z()):"left"==d.align?(x=l*.01*d.offsetPercentage+d.offsetPixels,m=h.left-k-d.popupBuffer,n=h.top+j/2-x,this.$arrow.addClass("pointing-right"),o=this.$popup.width(),p=x-this.$arrow.outerHeight()/2-parseInt(this.$popup.css("border-top-width"),10),d.responsiveToEdges&&y()):"middle"==d.align&&(m=e.width()/2-k/2,0>m&&(m=0),n=g.scrollTop()+e.height()/2-l/2,n<g.scrollTop()&&(n=g.scrollTop())),this.$popup.css({left:m,top:n}),this.$arrow.css({left:o,top:p})}},d.prototype.open=function(){this.isOpen||(this.isOpen=!0,this.$el.trigger("popupOpen"),this.$popup.show(),"free"!=this.options.align&&this.positionPopup())},d.prototype.close=function(){this.isOpen&&(this.options.jqXHR&&"pending"==this.options.jqXHR.state()&&(this.options.jqXHR.abort(),this.destroy()),this.options.destroyOnClose?this.destroy():(this.isOpen=!1,this.$popup.hide(),this.$el.trigger("popupClose")))},d.prototype.toggle=function(){this[this.isOpen?"close":"open"]()},d.prototype.destroy=function(){this.options.saveTo&&a(this.options.saveTo).removeData("popup-ref"),this.$el.trigger("popupDestroy"),this.$popup.remove()},d.prototype.replaceContent=function(a){this.$el.empty().append(a),this.positionPopup()},a.fn.popup=function(b,c){var e=null;return this.each(function(){var f=a(this),g=f.data("popup");if(this.readyState&&this.promise){b.jqXHR=this;var h=a('<div class="popup-inner">').popup(b);return h.popup("$popup").addClass("loading"),this.done(function(){h.popup("$popup").removeClass("loading")}),e=h,!1}if(g)if("string"==typeof b)if(g[b]&&!b.match(/^_/)){if(e="function"==typeof g[b]?g[b](c):g[b])return!1}else a.error("fn.Modal says: Method or Property you are trying to call is either private or does not exist");else b||g.toggle();else{var i=a.extend({},a.fn.popup.defaults,"object"==typeof b&&b);f.data("popup",g=new d(f,i))}}),e||this},a.fn.popup.Constructor=d,a.fn.popup.defaults={align:"free",attachTo:null,autoOpen:!0,popupClass:"",height:0,maxHeight:0,maxWidth:0,minHeight:200,minWidth:200,offsetPercentage:0,offsetPixels:0,popupBuffer:0,responsiveAlignment:!0,responsiveToEdges:!0,saveTo:null,showArrow:!0,showClose:!0,width:0,zIndex:1e3}}(jQuery,document,window),+function(a,b,c){if(!a.fn.popup)return a.error("jquery.modal.js requires jquery.popups.js"),void 0;var d=function(){var a=b.createElement("modal"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var d in c)if(void 0!==a.style[d])return c[d];return null}(),e=[32,33,34,35,36,37,38,39,40],f=function(){a(b.body).on("keydown.modal",function(a){for(var b=0;b<e.length;b++)if(a.keyCode==e[b])return a.preventDefault(),void 0})},g=function(){a(b.body).off("keydown.modal")},h=function(c,d){this.options=d,this.$el=c,this._$body=a(b.body),this.isOpen=!1,this._create()};h.prototype._create=function(){var b=this,c=this.options,d=['style="',"background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQI12NgYGDYDAAAuAC0TCbBxgAAAABJRU5ErkJggg==);","bottom: 0;","left: 0;","opacity: 0;","overflow-x: auto;","overflow-y: auto;","position: fixed;","right: 0;","top: 0;","transition: opacity "+c.transitionTime+"s;","width: 100%;","z-index: "+c.zIndex+";",'"'].join("");this.$overlay=a('<div class="overlay" '+d+"></div>").appendTo(this._$body);var e={align:"middle",_appendTo:b.$overlay,attachTo:b.$overlay,zIndex:c.zIndex+5};c.saveTo&&a(c.saveTo).data("modal-ref",this.$el),a.extend(c,e),c.saveTo=null,c.popupClass="modal"+(c.popupClass?" "+c.popupClass:""),this.$el.popup(c),this.$overlay.hide(),this.$overlay.find(".popup-close").off("click.popup").on("click.modal",function(){b.close()}),c.autoOpen&&b.open()},h.prototype.open=function(){var a=this;this.isOpen||(f(),this.isOpen=!0,this.$overlay.show().addClass("show"),c.setTimeout(function(){a.$overlay.css("opacity",1)},20),this._$body.css("overflow","hidden"),this.options.closeOnEscape&&this._$body.on("keydown.modal",function(b){27==b.keyCode&&a.close()}))},h.prototype.close=function(){var a=this;g(),this.options.jqXHR&&"pending"==this.options.jqXHR.state()&&(this.options.jqXHR.abort(),this.destroy()),this.options.destroyOnClose?this.destroy():(this.isOpen=!1,this.options.transition&&d?this.$overlay.one(d,function(){a._closeModal()}):this._closeModal.call(a),this.$overlay.css("opacity",0))},h.prototype.toggle=function(){this.isOpen?this.close():this.open()},h.prototype.destroy=function(){var b=this;this.options.saveTo&&a(this.options.saveTo).removeData("modal-ref"),this.$el.trigger("modalDestroy"),this.options.transition&&d&&this.$overlay.one(d,function(){b._closeModal.call(b)})},h.prototype.replaceContent=function(a){this.$el.popup("replaceContent",a)},h.prototype._closeModal=function(){this.options.destoryOnClse?this.$overlay.remove():this.$overlay.hide(),this._$body.css("overflow","visible").off(".modal")},a.fn.modal=function(b,c){var d=null;return this.each(function(){var e=a(this),f=e.data("modal");if(this.readyState&&this.promise){b.jqXHR=this;var g=a("<div>").modal(b);return g.popup("$popup").addClass("loading"),this.done(function(){g.popup("$popup").removeClass("loading")}),d=g,!1}if(f)if("string"==typeof b)if(f[b]&&!b.match(/^_/)){if(d="function"==typeof f[b]?f[b](c):f[b])return!1}else a.error("fn.Modal says: Method or Property you are trying to call is either private or does not exist");else b||f.toggle();else{var i=a.extend({},a.fn.modal.defaults,"object"==typeof b&&b);e.data("modal",f=new h(e,i))}}),d||this},a.fn.modal.Constructor=h,a.fn.modal.defaults={autoOpen:!0,closeOnEscape:!0,destroyOnClose:!1,popupClass:"",saveTo:null,showClose:!0,transition:!0,transitionTime:.6,zIndex:5e3}}(jQuery,document,window);