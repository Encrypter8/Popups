/*! jQuery Popups - v0.7.0 - 2013-07-11
* https://github.com/Encrypter8/Popups
* Copyright (c) 2013 Harris Miller; Licensed MIT */
!function(a){var b=function(a,b){this.options=b,this.$el=a,this.isOpen=!1,this._create()};b.prototype._create=function(){var b=this,c=this.options,d=['style=" position: absolute; ',c.height?"height: "+c.height+"px; ":"",c.maxHeight?"max-height: "+c.maxHeight+"px; ":"",c.maxWidth?"max-width: "+c.maxWidth+"px; ":"",c.minHeight?"min-height: "+c.minHeight+"px; ":"",c.minWidth?"min-width: "+c.minWidth+"px; ":"",c.width?"width: "+c.width+"px; ":"","z-index: "+c.zIndex+'"'].join("");this.$popup=a(['<div class="popup-container '+c.popupClass+'" '+d+">",c.showClose?'<button class="popup-close" type="button"></button>':"",c.showArrow?'<div class="popup-arrow"><div class="inner-arrow"></div></div>':"","</div>"].join("")),this.$arrow=this.$popup.find(".popup-arrow"),c.appendTo=c.appendTo||document.body,this.$popup.append(this.$el).appendTo(c.appendTo).hide(),c.saveTo&&a(c.saveTo).data("popup-ref",this.$el),c.showClose&&this.$popup.find(".popup-close").on("click.popup",function(){b.close()}),c.attachTo=a(c.attachTo),c.autoOpen&&this.open()},b.prototype.positionPopup=function(){var b=this.options,c=a(window),d=a(document),e=a(b.appendTo),f=e.offset().top,g=e.offset().left;console.log(e),console.log(f),console.log(g);var h=b.attachTo.offset(),i=b.attachTo.outerWidth(),j=b.attachTo.outerHeight(),k=this.$popup.outerWidth(),l=this.$popup.outerHeight(),m=0,n=0,o=0,p=0;if(1==b.responsiveAlignment&&"middle"!=b.align){var q=function(){return h.left+i+k+b.popupBuffer>c.width()?!1:"right"},r=function(){return h.left-k-b.popupBuffer<0?!1:"left"},s=function(){return h.top+j+l+b.popupBuffer>d.scrollTop()+c.height()?!1:"bottom"},t=function(){return h.top-l-b.popupBuffer<d.scrollTop()?!1:"top"},u=[];"right"==b.align?u=[q,r,s,t]:"left"==b.align?u=[r,q,s,t]:"bottom"==b.align?u=[s,t,q,r]:"top"==b.align&&(u=[t,s,q,r]);for(var v=!1,w=0;w<u.length&&(v=u[w].call(),0==v);w++);0==v&&(v="middle"),b.align=v}var x=function(){if(n+l>d.scrollTop()+c.height()){var a=n+l-(d.scrollTop()+c.height());n-=a,p+=a}if(n<d.scrollTop()){var a=d.scrollTop()-n;n+=a,p-=a}},y=function(){if(m+k>c.width()){var a=m+k-c.width();m-=a,o+=a}if(0>m){var a=-m;m+=a,o-=a}};if("top"==b.align){var z=k*.01*b.offsetPercentage+b.offsetPixels;m=h.left+i/2-z,n=h.top-l-b.popupBuffer,this.$arrow.addClass("pointing-down"),o=z-this.$arrow.outerWidth()/2-parseInt(this.$popup.css("border-left-width")),p=this.$popup.height(),b.responsiveToEdges&&y()}else if("right"==b.align){var z=l*.01*b.offsetPercentage+b.offsetPixels;m=h.left+i+b.popupBuffer,n=h.top+j/2-z,this.$arrow.addClass("pointing-left"),o=-this.$arrow.outerWidth(),p=z-this.$arrow.outerHeight()/2-parseInt(this.$popup.css("border-top-width")),b.responsiveToEdges&&x()}else if("bottom"==b.align){var z=k*.01*b.offsetPercentage+b.offsetPixels;m=h.left+i/2-z,n=h.top+j+b.popupBuffer,this.$arrow.addClass("pointing-up"),o=z-this.$arrow.outerWidth()/2-parseInt(this.$popup.css("border-left-width")),p=-this.$arrow.outerHeight(),b.responsiveToEdges&&y()}else if("left"==b.align){var z=l*.01*b.offsetPercentage+b.offsetPixels;m=h.left-k-b.popupBuffer,n=h.top+j/2-z,this.$arrow.addClass("pointing-right"),o=this.$popup.width(),p=z-this.$arrow.outerHeight()/2-parseInt(this.$popup.css("border-top-width")),b.responsiveToEdges&&x()}else"middle"==b.align&&(m=c.width()/2-k/2,0>m&&(m=0),n=e.scrollTop()+c.height()/2-l/2,n<e.scrollTop()&&(n=e.scrollTop()));this.$popup.css({left:m,top:n}),this.$arrow.css({left:o,top:p})},b.prototype.open=function(){this.isOpen||(this.isOpen=!0,this.$el.trigger("popupOpen"),this.$popup.show(),"free"!=this.options.align&&this.positionPopup())},b.prototype.close=function(){this.isOpen&&(this.options.jqXHR&&"pending"==this.options.jqXHR.state()&&(this.options.jqXHR.abort(),this.destroy()),this.options.destroyOnClose?this.destroy():(this.isOpen=!1,this.$popup.hide(),this.$el.trigger("popupClose")))},b.prototype.toggle=function(){this[this.isOpen?"close":"open"]()},b.prototype.destroy=function(){this.options.saveTo&&a(this.options.saveTo).removeData("popup-ref"),this.$el.trigger("popupDestroy"),this.$popup.remove()},b.prototype.replaceContent=function(a){this.$el.empty().append(a),this.positionPopup()},a.fn.popup=function(c,d){var e=null;return this.each(function(){var f=a(this),g=f.data("popup");if(this.readyState&&this.promise){c.jqXHR=this;var h=a('<div class="popup-inner">').popup(c);return h.popup("$popup").addClass("loading"),this.done(function(){h.popup("$popup").removeClass("loading")}),e=h,!1}if(g)if("string"==typeof c)if(g[c]&&!c.match(/^_/)){if(e="function"==typeof g[c]?g[c](d):g[c])return!1}else a.error("fn.Modal says: Method or Property you are trying to call is either private or does not exist");else c||g.toggle();else{var i=a.extend({},a.fn.popup.defaults,"object"==typeof c&&c);f.data("popup",g=new b(f,i))}}),e||this},a.fn.popup.defaults={align:"free",appendTo:null,attachTo:null,autoOpen:!0,popupClass:"",height:0,maxHeight:0,maxWidth:0,minHeight:200,minWidth:200,offsetPercentage:0,offsetPixels:0,popupBuffer:0,responsiveAlignment:!1,responsiveToEdges:!1,saveTo:null,showArrow:!1,showClose:!1,width:0,zIndex:1e3}}(window.jQuery),!function(a){if(!a.fn.popup)return a.error("jquery.modal.js requires jquery.popups.js"),void 0;var b=function(){var a=document.createElement("modal"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return b[c];return null}(),c=function(b,c){this.options=c,this.$el=b,this._$body=a(document.body),this.isOpen=!1,this._create()};c.prototype._create=function(){var b=this,c=this.options,d=['style="',"background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQI12NgYGDYDAAAuAC0TCbBxgAAAABJRU5ErkJggg==);","bottom: 0;","left: 0;","opacity: 0;","overflow-x: auto;","overflow-y: auto;","position: fixed;","right: 0;","top: 0;","transition: opacity "+c.transitionTime+"s;","width: 100%;","z-index: "+c.zIndex+";",'"'].join("");this.$overlay=a('<div class="overlay" '+d+"></div>").appendTo(this._$body);var e={align:"middle",appendTo:b.$overlay,showClose:!0,zIndex:c.zIndex+5};c.saveTo&&a(c.saveTo).data("modal-ref",this.$el),e=a.extend({},c,e),e.saveTo=null,e.popupClass="modal"+(c.popupClass?" "+c.popupClass:""),this.$el.popup(e),this.$overlay.hide(),this.$overlay.find(".popup-close").off("click.popup").on("click.modal",function(){b.close()}),c.autoOpen&&b.open()},c.prototype.open=function(){var a=this;this.isOpen||(this.isOpen=!0,this.$overlay.show().addClass("show"),window.setTimeout(function(){a.$overlay.css("opacity",1)},20),this._$body.css("overflow","hidden"),this.options.closeOnEscape&&this._$body.on("keydown.modal",function(b){27==b.keyCode&&a.close()}))},c.prototype.close=function(){var a=this;this.options.jqXHR&&"pending"==this.options.jqXHR.state()&&(this.options.jqXHR.abort(),this.destroy()),this.options.destroyOnClose?this.destroy():(this.isOpen=!1,this.options.transition&&b?this.$overlay.one(b,function(){a._closeModal()}):this._closeModal.call(a),this.$overlay.css("opacity",0))},c.prototype.toggle=function(){this.isOpen?this.close():this.open()},c.prototype.destroy=function(){var c=this;this.options.saveTo&&a(this.options.saveTo).removeData("modal-ref"),this.$el.trigger("modalDestroy"),this.options.transition&&b&&this.$overlay.one(b,function(){c._closeModal.call(c)})},c.prototype.replaceContent=function(a){this.$el.popup("replaceContent",a)},c.prototype._closeModal=function(){this.options.destoryOnClse?this.$overlay.remove():this.$overlay.hide(),this._$body.css("overflow","visible").off(".modal")},a.fn.modal=function(b,d){var e=null;return this.each(function(){var f=a(this),g=f.data("modal");if(this.readyState&&this.promise){b.jqXHR=this;var h=a("<div>").modal(b);return h.popup("$popup").addClass("loading"),this.done(function(){h.popup("$popup").removeClass("loading")}),e=h,!1}if(g)if("string"==typeof b)if(g[b]&&!b.match(/^_/)){if(e="function"==typeof g[b]?g[b](d):g[b])return!1}else a.error("fn.Modal says: Method or Property you are trying to call is either private or does not exist");else b||g.toggle();else{var i=a.extend({},a.fn.modal.defaults,"object"==typeof b&&b);f.data("modal",g=new c(f,i))}}),e||this},a.fn.modal.defaults={autoOpen:!0,closeOnEscape:!0,destroyOnClose:!1,popupClass:"",saveTo:null,transition:!0,transitionTime:.6,zIndex:5e3}}(window.jQuery);